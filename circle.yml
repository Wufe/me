machine:
  timezone:
    Europe/Rome

  node:
    version:
      6.3.1

  php:
    version:
      7.0.7

dependencies:
  override:
    - pwd
    - ls -al
    - npm install -g typings webpack
    - npm install && ls -al node_modules
    - typings install && ls -al typings/globals
    - cd src && composer install --prefer-dist --no-interaction
    - cd src && composer run-script post-root-package-install
    - cd src && composer run-script post-create-project-cmd

test:
  override:
    - make test

deployment:
  production:
    branch: production
    commands:
      - make build